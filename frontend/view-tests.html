<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>View Test Questions</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 40px;
      background: #f9f9f9;
    }

    #logoutBtn {
      position: absolute;
      top: 20px;
      right: 20px;
      background: #d9534f;
      color: white;
      border: none;
      padding: 8px 16px;
      cursor: pointer;
      border-radius: 4px;
    }

    select, button {
      padding: 8px 12px;
      font-size: 16px;
      margin: 8px 0;
    }

    .question-block {
      background: #fff;
      border: 1px solid #ccc;
      margin-bottom: 16px;
      padding: 16px;
      border-radius: 8px;
    }

    .question-block h4 {
      margin-bottom: 8px;
    }

    .option {
      margin-left: 16px;
    }
  </style>
</head>
<body>

  <button id="logoutBtn" onclick="logout()">üö™ Logout</button>

  <h2>üìã View Test Questions</h2>

  <label for="testSelect">Select Test:</label>
  <select id="testSelect"><option value="">Loading...</option></select>
  <button onclick="loadQuestions()">üìÑ Load Questions</button>

  <div id="questionsDisplay"></div>

  <script>
    const BASE_URL = "https://quiz-app-4087.onrender.com";

    function logout() {
      localStorage.clear();
      window.location.href = "index.html";
    }

    // Load tests on page load
    window.onload = () => {
      fetch(`${BASE_URL}/tests`)
        .then(res => res.json())
        .then(tests => {
          const sel = document.getElementById('testSelect');
          sel.innerHTML = '<option value="">-- Select Test --</option>';
          tests.forEach(t => {
            const opt = document.createElement('option');
            opt.value = t;
            opt.textContent = t;
            sel.appendChild(opt);
          });
        })
        .catch(err => {
          console.error(err);
          alert("‚ùå Failed to load test list.");
        });
    };

    // Load and show questions of selected test
    function loadQuestions() {
      const testId = document.getElementById('testSelect').value;
      const display = document.getElementById('questionsDisplay');
      display.innerHTML = "";

      if (!testId) return alert("Please select a test.");

      fetch(`${BASE_URL}/test/${testId}/questions`)
        .then(res => res.json())
        .then(questions => {
          if (!questions.length) {
            display.innerHTML = "<p>No questions found.</p>";
            return;
          }

          questions.forEach((q, index) => {
            const div = document.createElement("div");
            div.className = "question-block";
            div.innerHTML = `
              <h4>Q${index + 1}: ${q.question}</h4>
              <p class="option">A. ${q.options[0]}</p>
              <p class="option">B. ${q.options[1]}</p>
              <p class="option">C. ${q.options[2]}</p>
              <p class="option">D. ${q.options[3]}</p>
              <p><strong>‚úÖ Correct Answer:</strong> ${q.correctAnswer}</p>
            `;
            display.appendChild(div);
          });
        })
        .catch(err => {
          console.error(err);
          alert("‚ùå Failed to load questions.");
        });
    }
  </script>

</body>
</html>

